

### 局部性原理

局部性原理的产生: 主存和cpu的速度差距过多，如何提升主存的速度，一种提升主存的接口数量和主存模块的数量，但是这样主存的速度还是太慢，并且价格昂贵，后来人们发现了程序访问的局部性原理，cpu访问主存实际上只是访问存储器的一小块地方，只需要将那一小块地方进行改善。

存在一种速度很快，造价相对较贵，但是存储容量教主存小的Cache，来弥补主存和CPU的速度不匹配的问题

Cache 虽然存储容量不大，但是相对于寄存器，容量还是较大的，所以CPU和Cache交互是以字节来算的，主存和Cache交互是以块来算的。

#### 空间局部性

在最近的未来要用到的信息(指令和数据), 很可能与现在正在使用的存储空间上是邻近的

#### 时间局部性

在最近的未来要用到的信息，很可能是现在正在使用到的信息

### Cache命中率

<img src="../../images/QQ截图20201208203117.png">

### Cache基本工作原理

<img src="../../images/QQ截图20201208232430.png">

#### 地址映射

主存中的块放到Cache中哪个位置

##### 全相联映射

主存中的块随意的放到Cache中，需要在Cache地址中高位保存主存的地址的高位。

<img src="../../images/QQ截图20201208232801.png">

##### 直接映射

主存中的块直接映射到Cache中

<img src="../../images/QQ截图20201208233218.png">

##### 组相联映射

按编号，组内随意放。

<img src="../../images/QQ截图20201208233418.png">

##### 总结

全相联映射，Cache随意被放，提高了空闲空间的利用率，但是杂乱无章   
直接映射，某种地址只能放在固定的Cache中，即使Cache中存在空闲的空间，也不能放，空间利用率低，但是查找方便   
组相联映射，前两种方案的折中，组内随意放，分组保证了存取的有序，随意放提高了空间的利用率

