

数组可以说是最简单的一种数据结构，它占据一块连续的内存并按照顺序存储数据。

创建数组时，需要先指定数组容器的大小，然后根据大小分配内存。

由于数组的内存是连续的，于是可以根据下标在O(1)时间读写任何元素，因此它的时间效率很高。

**根据数组时间效率高的优点, 实现简单的哈希表**，用数组来实现简单的哈希表，把数组的下标设为哈希表的键，数组元素为哈希表的值，
有了这样的哈希表，我们可以在O(1)时间内查找。

**为了解决数组空间效率不高的问题**，人们又设计实现了多种动态数组，比如c++中的STL中的vector，为了避免浪费，先为数组开辟较小的空间，然后往数组中添加数组。
当数组的数据超过数组容量时，我们再重新分配一块更大的空间(c++ 中vector 为之前的两倍，python list也为之前的两倍)，把之前的数据复制到新数组中，再把之前的内存释放。
这对时间性能有负面影响，因此使用动态数组时要尽量减少改变数组容量大小的次数。

### 关键点1
在c/c++中，数组和指针是既相关又有区别的概念，当我们声明一个数组时，其数组的名字也是一个指针，该指针指向数组的第一个元素。我们可以用指针来访问数组。 
c/c++没有记录数组的大小，因此在访问数组元素时，程序员要确保没有超出数组的边界。

运行下面代码，请问输出什么？

```c++
#include <iostream>
using namespace std;

int GetSize(int data[])
{
	return sizeof(data);
}

int main(int argc, const char* argv[])
{
	int data1[] = {1, 2, 3, 4, 5};
	int size1 = sizeof(data1);

	int* data2 = data1;
	int size2 = sizeof(data2);

	int size3 = GetSize(data1);
	cout << size1 << endl << size2 << endl << size3 << endl;
	return 0;
}
```

答案是： 20， 8， 8，data是一个数组，sizeof(data)求的是数组的大小，5个整数，每个整数占4个字节，因此占20个字节。
data2是指针，指针在32位操作系统上占4位，64位操作系统占8位。在c/c++中，当数组当作函数的参数进行传递时，数组就自动退化为同类型的指针。因此，尽管函数GetSize的参数data被声明为数组，但他会退化为指针。

### 面试题3: 找出数组中重复的数字

!!!question
	在一个长度为n的数组里的所有数字都在0~n-1的范围内。数组中某些数字是重复的，但是不知道有几个数字是重复的了，也不知道数字重复了几次。请找出数组中任意一个重复的数字。例如，如果输入长度为7的数组{2,3,1,0,2,5,3},那么对应的输出重复的数字2或者3。


!!!tip
	解决这个问题的一个简单的办法是先把输入的数组排序。从排序的数组中找出重复的数字只需要扫描排序的数组就可以了。排序一个长度为n的数组需要O(nlgn)的时间。 

	还可以利用哈希表来解决这个问题，从头到尾按顺序扫描数组的每个数字，每扫描到一个数字的时候，都可以用O(1)的时间来判断哈希表里是否已经包含了该数字，如果哈希表里还没有这个数字，就把它加入到哈希表。如果哈希表里已经存在这个数字，就找到了一个重复的数字。这个算法的时间复杂度是O(n)，但它提高时间效率是以一个大小为O(n)的哈希表为代价的。

	我们注意到数组中的数字都在0~n-1的范围内。如果这个数组中没有重复的数字，那么当数组排序之后数组i将出现在下标为i的位置。由于数组中有重复的数字，有些位置可能存在多个数字。 现在让我们重排数组，从头到尾扫描数组，当扫描到下标i时，判断数组下标i的元素是否和i相同（arr[i] == i），不相同，则把它和第arr[i]个数进行交换（swap(arr[i], arr[arr[i]])），直到arr[i]和i同等，把arr[i]放回属于他的位置。重复上述的操作。
	直到我们发现一个重复的数字。
	```c++
	arr[] = {2, 3, 1, 0, 2, 5, 3}
	i = 0; arr[i] != i; swap(arr[i], arr[arr[i]]);  // {1, 3, 2, 0, 2, 5, 3}
		   arr[i] != i; swap(arr[i], arr[arr[i]]);  // {3, 1, 2, 0, 2, 5, 3}
		   arr[i] != i; swap(arr[i], arr[arr[i]]);  // {0, 1, 2, 3, 2, 5, 3}
    i = 1; arr[i] == i;
    i = 2; arr[i] == i;
    i = 3; arr[i] == i;
    i = 4; arr[i] != i; arr[arr[i]] = arr[i]; return arr[i];
    ```

!!!answer
	c++: <a href="https://github.com/yiouejv/blog/blob/master/docs/%E5%89%91%E6%8C%87offer/codes/arrar_repeat.cpp">arrar_repeat.cpp</a>
	python: <a href="https://github.com/yiouejv/blog/blob/master/docs/%E5%89%91%E6%8C%87offer/codes/arrar_repeat.py">arrar_repeat.py</a>